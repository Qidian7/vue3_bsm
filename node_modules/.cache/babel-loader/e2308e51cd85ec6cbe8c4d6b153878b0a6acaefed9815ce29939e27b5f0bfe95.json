{"ast":null,"code":"// TODO Draggable for group\n// FIXME Draggable on element which has parent rotation or scale\nfunction Draggable() {\n  this.on('mousedown', this._dragStart, this);\n  this.on('mousemove', this._drag, this);\n  this.on('mouseup', this._dragEnd, this); // `mosuemove` and `mouseup` can be continue to fire when dragging.\n  // See [Drag outside] in `Handler.js`. So we do not need to trigger\n  // `_dragEnd` when globalout. That would brings better user experience.\n  // this.on('globalout', this._dragEnd, this);\n  // this._dropTarget = null;\n  // this._draggingTarget = null;\n  // this._x = 0;\n  // this._y = 0;\n}\n\nDraggable.prototype = {\n  constructor: Draggable,\n  _dragStart: function (e) {\n    var draggingTarget = e.target; // Find if there is draggable in the ancestor\n\n    while (draggingTarget && !draggingTarget.draggable) {\n      draggingTarget = draggingTarget.parent;\n    }\n    if (draggingTarget) {\n      this._draggingTarget = draggingTarget;\n      draggingTarget.dragging = true;\n      this._x = e.offsetX;\n      this._y = e.offsetY;\n      this.dispatchToElement(param(draggingTarget, e), 'dragstart', e.event);\n    }\n  },\n  _drag: function (e) {\n    var draggingTarget = this._draggingTarget;\n    if (draggingTarget) {\n      var x = e.offsetX;\n      var y = e.offsetY;\n      var dx = x - this._x;\n      var dy = y - this._y;\n      this._x = x;\n      this._y = y;\n      draggingTarget.drift(dx, dy, e);\n      this.dispatchToElement(param(draggingTarget, e), 'drag', e.event);\n      var dropTarget = this.findHover(x, y, draggingTarget).target;\n      var lastDropTarget = this._dropTarget;\n      this._dropTarget = dropTarget;\n      if (draggingTarget !== dropTarget) {\n        if (lastDropTarget && dropTarget !== lastDropTarget) {\n          this.dispatchToElement(param(lastDropTarget, e), 'dragleave', e.event);\n        }\n        if (dropTarget && dropTarget !== lastDropTarget) {\n          this.dispatchToElement(param(dropTarget, e), 'dragenter', e.event);\n        }\n      }\n    }\n  },\n  _dragEnd: function (e) {\n    var draggingTarget = this._draggingTarget;\n    if (draggingTarget) {\n      draggingTarget.dragging = false;\n    }\n    this.dispatchToElement(param(draggingTarget, e), 'dragend', e.event);\n    if (this._dropTarget) {\n      this.dispatchToElement(param(this._dropTarget, e), 'drop', e.event);\n    }\n    this._draggingTarget = null;\n    this._dropTarget = null;\n  }\n};\nfunction param(target, e) {\n  return {\n    target: target,\n    topTarget: e && e.topTarget\n  };\n}\nvar _default = Draggable;\nmodule.exports = _default;","map":{"version":3,"names":["Draggable","on","_dragStart","_drag","_dragEnd","prototype","constructor","e","draggingTarget","target","draggable","parent","_draggingTarget","dragging","_x","offsetX","_y","offsetY","dispatchToElement","param","event","x","y","dx","dy","drift","dropTarget","findHover","lastDropTarget","_dropTarget","topTarget","_default","module","exports"],"sources":["/Users/mac/Desktop/vue_bsm/vue3_bsm/node_modules/zrender/lib/mixin/Draggable.js"],"sourcesContent":["// TODO Draggable for group\n// FIXME Draggable on element which has parent rotation or scale\nfunction Draggable() {\n  this.on('mousedown', this._dragStart, this);\n  this.on('mousemove', this._drag, this);\n  this.on('mouseup', this._dragEnd, this); // `mosuemove` and `mouseup` can be continue to fire when dragging.\n  // See [Drag outside] in `Handler.js`. So we do not need to trigger\n  // `_dragEnd` when globalout. That would brings better user experience.\n  // this.on('globalout', this._dragEnd, this);\n  // this._dropTarget = null;\n  // this._draggingTarget = null;\n  // this._x = 0;\n  // this._y = 0;\n}\n\nDraggable.prototype = {\n  constructor: Draggable,\n  _dragStart: function (e) {\n    var draggingTarget = e.target; // Find if there is draggable in the ancestor\n\n    while (draggingTarget && !draggingTarget.draggable) {\n      draggingTarget = draggingTarget.parent;\n    }\n\n    if (draggingTarget) {\n      this._draggingTarget = draggingTarget;\n      draggingTarget.dragging = true;\n      this._x = e.offsetX;\n      this._y = e.offsetY;\n      this.dispatchToElement(param(draggingTarget, e), 'dragstart', e.event);\n    }\n  },\n  _drag: function (e) {\n    var draggingTarget = this._draggingTarget;\n\n    if (draggingTarget) {\n      var x = e.offsetX;\n      var y = e.offsetY;\n      var dx = x - this._x;\n      var dy = y - this._y;\n      this._x = x;\n      this._y = y;\n      draggingTarget.drift(dx, dy, e);\n      this.dispatchToElement(param(draggingTarget, e), 'drag', e.event);\n      var dropTarget = this.findHover(x, y, draggingTarget).target;\n      var lastDropTarget = this._dropTarget;\n      this._dropTarget = dropTarget;\n\n      if (draggingTarget !== dropTarget) {\n        if (lastDropTarget && dropTarget !== lastDropTarget) {\n          this.dispatchToElement(param(lastDropTarget, e), 'dragleave', e.event);\n        }\n\n        if (dropTarget && dropTarget !== lastDropTarget) {\n          this.dispatchToElement(param(dropTarget, e), 'dragenter', e.event);\n        }\n      }\n    }\n  },\n  _dragEnd: function (e) {\n    var draggingTarget = this._draggingTarget;\n\n    if (draggingTarget) {\n      draggingTarget.dragging = false;\n    }\n\n    this.dispatchToElement(param(draggingTarget, e), 'dragend', e.event);\n\n    if (this._dropTarget) {\n      this.dispatchToElement(param(this._dropTarget, e), 'drop', e.event);\n    }\n\n    this._draggingTarget = null;\n    this._dropTarget = null;\n  }\n};\n\nfunction param(target, e) {\n  return {\n    target: target,\n    topTarget: e && e.topTarget\n  };\n}\n\nvar _default = Draggable;\nmodule.exports = _default;"],"mappings":"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"},"metadata":{},"sourceType":"script","externalDependencies":[]}
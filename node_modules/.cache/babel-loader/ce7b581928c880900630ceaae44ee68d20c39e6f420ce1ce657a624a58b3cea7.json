{"ast":null,"code":"// import { getInfo, info, infoDelete } from \"@/api/api\";\nimport { getData, changeInfo, delData } from \"@/utils/table\";\nexport default {\n  name: \"InfoList\",\n  data() {\n    return {\n      tableData: [],\n      dialogFormVisible: false,\n      form: {\n        name: \"\",\n        sex: \"1\",\n        age: \"\",\n        father: \"\",\n        mother: \"\",\n        address: \"\",\n        time: \"\",\n        phone: \"\"\n      },\n      state: true,\n      formLabelWidth: \"80px\",\n      rules: {\n        name: [{\n          required: true,\n          message: \"请输入姓名\"\n        }],\n        sex: [{\n          required: true\n        }],\n        age: [{\n          required: true,\n          message: \"请输入年龄\"\n        }],\n        address: [{\n          required: true,\n          message: \"请输入地址\"\n        }],\n        time: [{\n          required: true\n        }],\n        phone: [{\n          required: true,\n          message: \"请输入联系方式\"\n        }]\n      },\n      total: 0\n    };\n  },\n  created() {\n    getData(this, \"/info\");\n  },\n  methods: {\n    del(row) {\n      // this.$alert(\"确定删除？\", \"提示\", {\n      //   confirmButtonText: \"确定\",\n      //   callback: () => {\n      //     infoDelete(row.id).then((res) => {\n      //       if (res.status === 200) {\n      //         // getData();\n      //         this.getData();\n      //         this.$message({ message: res.data.message, type: \"success\" });\n      //       }\n      //     });\n      //   },\n      // });\n      delData(this, \"/info\", row.id, getData);\n    },\n    edit(row) {\n      this.form = {\n        ...row\n      }; // 不要把当行的值直接赋给form，这样会有一个bug就是你在修改时表单也会跟着改\n      this.state = false;\n      this.dialogFormVisible = true;\n      this.title = \"修改学生信息\";\n    },\n    closeInfo(form) {\n      this.dialogFormVisible = false;\n      this.$refs[form].resetFields();\n    },\n    addStudent() {\n      this.form = {\n        name: \"\",\n        sex: \"1\",\n        age: \"\",\n        father: \"\",\n        mother: \"\",\n        address: \"\",\n        time: \"\",\n        phone: \"\"\n      };\n      this.dialogFormVisible = true;\n      this.state = true;\n    },\n    // getData() {\n    //   getInfo().then((res) => {\n    //     if (res.status === 200) {\n    //       this.tableData = res.data.data;\n    //       this.total = res.data.total;\n    //     }\n    //   });\n    // },\n    sure(form) {\n      this.$refs[form].validate(valid => {\n        if (valid) {\n          // console.log(form, this.form);\n          // if (this.state) {\n          // info(\"post\", this.form).then((res) => {\n          //   console.log(res);\n          //   if (res.status === 200) {\n          //     this.getData();\n          //     this.dialogFormVisible = false;\n          //     this.$message({ type: \"success\", message: res.data.message });\n          //   }\n          // });\n\n          // 用table.js封装类似方法\n          // root, method, form, callback\n          //   changeInfo(this, \"post\", \"/info\", this.form, getData);\n\n          //// } else {\n          //// info(\"put\", this.form).then((res) => {\n          ////   if (res.status === 200) {\n          ////     this.getData();\n          ////     this.dialogFormVisible = false;\n          ////     this.$message({ type: \"success\", message: res.data.message });\n          ////   }\n          //// });\n\n          // 用table.js封装类似方法\n          //   changeInfo(this, \"put\", \"/info\", this.form, getData);\n          let methods = \"\";\n          this.state ? methods = \"post\" : methods = \"put\";\n          changeInfo(this, methods, \"/info\", this.form, getData);\n        }\n      });\n    }\n  }\n};","map":{"version":3,"names":["getData","changeInfo","delData","name","data","tableData","dialogFormVisible","form","sex","age","father","mother","address","time","phone","state","formLabelWidth","rules","required","message","total","created","methods","del","row","id","edit","title","closeInfo","$refs","resetFields","addStudent","sure","validate","valid"],"sources":["/Users/mac/Desktop/vue_bsm/vue3_bsm/src/components/Student/InfoList.vue"],"sourcesContent":["<template>\n  <div class=\"infoList\">\n    <el-form :inline=\"true\" class=\"demo-form-inline\" size=\"small\">\n      <el-form-item>\n        <el-button type=\"primary\" @click=\"addStudent\">新增</el-button>\n      </el-form-item>\n    </el-form>\n    <!--  -->\n    <el-table :data=\"tableData\" border style=\"width: 100%\">\n      <!-- width+180px 改成 align=\"center\" 居中显示去除滚动条 -->\n      <el-table-column prop=\"name\" label=\"姓名\" align=\"center\">\n      </el-table-column>\n      <el-table-column prop=\"sex\" label=\"性别\" align=\"center\">\n      </el-table-column>\n      <el-table-column prop=\"age\" label=\"年龄\" align=\"center\">\n      </el-table-column>\n      <el-table-column prop=\"father\" label=\"父亲\" align=\"center\">\n      </el-table-column>\n      <el-table-column prop=\"mother\" label=\"母亲\" align=\"center\">\n      </el-table-column>\n      <el-table-column prop=\"address\" label=\"家庭住址\" align=\"center\">\n      </el-table-column>\n      <el-table-column prop=\"time\" label=\"入校时间\" align=\"center\">\n      </el-table-column>\n      <el-table-column prop=\"phone\" label=\"联系方式\" align=\"center\">\n      </el-table-column>\n      <el-table-column label=\"操作\" align=\"center\">\n        <template #default=\"scope\">\n          <el-button\n            type=\"danger\"\n            size=\"mini\"\n            icon=\"el-icon-delete\"\n            @click=\"del(scope.row)\"\n          >\n            删除\n          </el-button>\n          <el-button\n            type=\"primary\"\n            size=\"mini\"\n            icon=\"el-icon-edit\"\n            @click=\"edit(scope.row)\"\n          >\n            编辑\n          </el-button>\n        </template>\n      </el-table-column>\n    </el-table>\n    <!--  -->\n    <el-dialog\n      :title=\"state ? '添加学生信息' : '修改学生信息'\"\n      v-model=\"dialogFormVisible\"\n      width=\"500px\"\n    >\n      <el-form :model=\"form\" :rules=\"rules\" ref=\"form\">\n        <el-form-item label=\"姓名\" :label-width=\"formLabelWidth\" prop=\"name\">\n          <el-input v-model=\"form.name\" autocomplete=\"off\"></el-input>\n        </el-form-item>\n        <el-form-item label=\"性别\" :label-width=\"formLabelWidth\" prop=\"sex\">\n          <el-radio v-model=\"form.sex\" label=\"1\">男</el-radio>\n          <el-radio v-model=\"form.sex\" label=\"2\">女</el-radio>\n        </el-form-item>\n        <el-form-item label=\"年龄\" :label-width=\"formLabelWidth\" prop=\"age\">\n          <el-input v-model=\"form.age\" autocomplete=\"off\"></el-input>\n        </el-form-item>\n        <el-form-item\n          label=\"父亲姓名\"\n          :label-width=\"formLabelWidth\"\n          prop=\"father\"\n        >\n          <el-input v-model=\"form.father\" autocomplete=\"off\"></el-input>\n        </el-form-item>\n        <el-form-item\n          label=\"母亲姓名\"\n          :label-width=\"formLabelWidth\"\n          prop=\"mother\"\n        >\n          <el-input v-model=\"form.mother\" autocomplete=\"off\"></el-input>\n        </el-form-item>\n        <el-form-item\n          label=\"家庭住址\"\n          :label-width=\"formLabelWidth\"\n          prop=\"address\"\n        >\n          <el-input v-model=\"form.address\" autocomplete=\"off\"></el-input>\n        </el-form-item>\n        <el-form-item\n          label=\"入校时间\"\n          :label-width=\"formLabelWidth\"\n          prop=\"time\"\n        >\n          <!-- formar value-formar 是elementui自带的 -->\n          <el-date-picker\n            v-model=\"form.time\"\n            align=\"right\"\n            format=\"YYYY-MM-DD\"\n            value-format=\"YYYY-MM-DD\"\n            type=\"date\"\n            placeholder=\"选择日期\"\n          >\n          </el-date-picker>\n        </el-form-item>\n        <el-form-item\n          label=\"联系方式\"\n          :label-width=\"formLabelWidth\"\n          prop=\"phone\"\n        >\n          <el-input v-model=\"form.phone\" autocomplete=\"off\"></el-input>\n        </el-form-item>\n      </el-form>\n      <template #footer>\n        <!-- <div slot=\"footer\" class=\"dialog-footer\"> -->\n        <div class=\"dialog-footer\">\n          <el-button type=\"danger\" @click=\"closeInfo('form')\">\n            取 消\n          </el-button>\n          <el-button type=\"primary\" @click=\"sure('form')\"> 确 定 </el-button>\n        </div>\n      </template>\n    </el-dialog>\n  </div>\n</template>\n\n<script>\n// import { getInfo, info, infoDelete } from \"@/api/api\";\nimport { getData, changeInfo, delData } from \"@/utils/table\";\nexport default {\n  name: \"InfoList\",\n  data() {\n    return {\n      tableData: [],\n      dialogFormVisible: false,\n      form: {\n        name: \"\",\n        sex: \"1\",\n        age: \"\",\n        father: \"\",\n        mother: \"\",\n        address: \"\",\n        time: \"\",\n        phone: \"\",\n      },\n      state: true,\n      formLabelWidth: \"80px\",\n      rules: {\n        name: [\n          {\n            required: true,\n            message: \"请输入姓名\",\n          },\n        ],\n        sex: [\n          {\n            required: true,\n          },\n        ],\n        age: [\n          {\n            required: true,\n            message: \"请输入年龄\",\n          },\n        ],\n        address: [\n          {\n            required: true,\n            message: \"请输入地址\",\n          },\n        ],\n        time: [\n          {\n            required: true,\n          },\n        ],\n        phone: [\n          {\n            required: true,\n            message: \"请输入联系方式\",\n          },\n        ],\n      },\n      total: 0,\n    };\n  },\n  created() {\n    getData(this, \"/info\");\n  },\n  methods: {\n    del(row) {\n      // this.$alert(\"确定删除？\", \"提示\", {\n      //   confirmButtonText: \"确定\",\n      //   callback: () => {\n      //     infoDelete(row.id).then((res) => {\n      //       if (res.status === 200) {\n      //         // getData();\n      //         this.getData();\n      //         this.$message({ message: res.data.message, type: \"success\" });\n      //       }\n      //     });\n      //   },\n      // });\n      delData(this, \"/info\", row.id, getData);\n    },\n    edit(row) {\n      this.form = { ...row }; // 不要把当行的值直接赋给form，这样会有一个bug就是你在修改时表单也会跟着改\n      this.state = false;\n      this.dialogFormVisible = true;\n      this.title = \"修改学生信息\";\n    },\n    closeInfo(form) {\n      this.dialogFormVisible = false;\n      this.$refs[form].resetFields();\n    },\n    addStudent() {\n      this.form = {\n        name: \"\",\n        sex: \"1\",\n        age: \"\",\n        father: \"\",\n        mother: \"\",\n        address: \"\",\n        time: \"\",\n        phone: \"\",\n      };\n      this.dialogFormVisible = true;\n      this.state = true;\n    },\n    // getData() {\n    //   getInfo().then((res) => {\n    //     if (res.status === 200) {\n    //       this.tableData = res.data.data;\n    //       this.total = res.data.total;\n    //     }\n    //   });\n    // },\n    sure(form) {\n      this.$refs[form].validate((valid) => {\n        if (valid) {\n          // console.log(form, this.form);\n          // if (this.state) {\n          // info(\"post\", this.form).then((res) => {\n          //   console.log(res);\n          //   if (res.status === 200) {\n          //     this.getData();\n          //     this.dialogFormVisible = false;\n          //     this.$message({ type: \"success\", message: res.data.message });\n          //   }\n          // });\n\n          // 用table.js封装类似方法\n          // root, method, form, callback\n          //   changeInfo(this, \"post\", \"/info\", this.form, getData);\n\n          //// } else {\n          //// info(\"put\", this.form).then((res) => {\n          ////   if (res.status === 200) {\n          ////     this.getData();\n          ////     this.dialogFormVisible = false;\n          ////     this.$message({ type: \"success\", message: res.data.message });\n          ////   }\n          //// });\n\n          // 用table.js封装类似方法\n          //   changeInfo(this, \"put\", \"/info\", this.form, getData);\n          let methods = \"\";\n          this.state ? (methods = \"post\") : (methods = \"put\");\n          changeInfo(this, methods, \"/info\", this.form, getData);\n        }\n      });\n    },\n  },\n};\n</script>\n\n<style lang=\"scss\" scoped>\n.infoList {\n  .demo-form-inline,\n  .el-form-item {\n    text-align: left;\n  }\n  .el-pagination {\n    text-align: left;\n    margin-top: 20px;\n  }\n  .el-table {\n    .el-button {\n      display: flex;\n      justify-content: space-between;\n    }\n  }\n}\n</style>\n"],"mappings":"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"},"metadata":{},"sourceType":"module","externalDependencies":[]}
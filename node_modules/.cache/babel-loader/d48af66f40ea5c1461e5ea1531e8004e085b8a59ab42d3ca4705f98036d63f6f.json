{"ast":null,"code":"import { students, studentDelete } from \"@/api/api\";\nexport default {\n  name: \"StudentList\",\n  data() {\n    return {\n      tableData: [],\n      currentPage: 1,\n      // 当前页数\n      pageSize: 10,\n      //每页显示条数\n      total: 0,\n      formInline: {\n        name: \"\"\n      }\n    };\n  },\n  computed: {\n    computedData() {\n      return this.tableData.slice((this.currentPage - 1) * this.pageSize, this.currentPage * this.pageSize);\n    }\n  },\n  methods: {\n    find() {\n      // console.log(this.formInline);\n      this.getData(this.formInline);\n    },\n    reset() {\n      // console.log(this.formInline);\n      this.formInline = {};\n      this.getData(this.formInline);\n    },\n    del(row) {\n      console.log(row);\n      studentDelete(row.id).then(res => {\n        if (res.data.status === 200) {\n          this.$message({\n            message: \"删除成功\",\n            type: \"success\"\n          });\n          // 刷新数据\n          this.getData();\n        }\n      });\n    },\n    handleSizeChange(val) {\n      this.pageSize = val;\n      this.currentPage = 1;\n    },\n    handleCurrentChange(val) {\n      this.currentPage = val;\n    },\n    getData(params) {\n      students(params).then(res => {\n        //console.log(res); // 所有学生数据\n        if (res.status === 200) {\n          this.tableData = res.data.data;\n          this.total = res.data.total;\n          this.tableData.forEach(item => {\n            // 这样做直接修改原数据了，尽量不要这么做\n            // item.sex === 1 ? (item.sex = \"男\") : (item.sex = \"女\");\n            item.sex === 1 ? item.sex_text = \"男\" : item.sex_text = \"女\";\n            if (item.state === \"1\") {\n              return item.state_text = \"已入学\";\n            } else {\n              return item.state_text = \"已毕业\";\n            }\n          });\n        }\n      });\n    }\n  },\n  created() {\n    this.getData();\n  }\n};","map":{"version":3,"names":["students","studentDelete","name","data","tableData","currentPage","pageSize","total","formInline","computed","computedData","slice","methods","find","getData","reset","del","row","console","log","id","then","res","status","$message","message","type","handleSizeChange","val","handleCurrentChange","params","forEach","item","sex","sex_text","state","state_text","created"],"sources":["/Users/mac/Desktop/vue_bsm/vue3_bsm/src/components/Student/StudentList.vue"],"sourcesContent":["<template>\n  <div class=\"studentList\">\n    <!-- 查询、重置表单 -->\n    <el-form\n      :inline=\"true\"\n      :model=\"formInline\"\n      class=\"demo-form-inline\"\n      size=\"small\"\n    >\n      <el-form-item label=\"姓名\">\n        <el-input v-model=\"formInline.name\" placeholder=\"请输入需要查询的姓名\">\n        </el-input>\n      </el-form-item>\n      <el-form-item>\n        <el-button type=\"primary\" @click=\"find\">查询</el-button>\n      </el-form-item>\n      <el-form-item>\n        <el-button type=\"primary\" @click=\"reset\">重置</el-button>\n      </el-form-item>\n    </el-form>\n    <!-- 分页公式：slice(（当前页数-1）*每页条数,当前页数*每页条数) -->\n    <el-table :data=\"computedData\" border style=\"width: 100%\">\n      <!-- width+180px 改成 align=\"center\" 居中显示去除滚动条 -->\n      <el-table-column prop=\"name\" label=\"姓名\" align=\"center\">\n      </el-table-column>\n      <el-table-column prop=\"sex_text\" label=\"性别\" align=\"center\">\n      </el-table-column>\n      <el-table-column prop=\"age\" label=\"年龄\" align=\"center\">\n      </el-table-column>\n      <el-table-column prop=\"number\" label=\"学号\" align=\"center\">\n      </el-table-column>\n      <el-table-column prop=\"class\" label=\"班级\" align=\"center\">\n      </el-table-column>\n      <el-table-column prop=\"state_text\" label=\"状态\" align=\"center\">\n      </el-table-column>\n      <el-table-column prop=\"phone\" label=\"联系方式\" align=\"center\">\n      </el-table-column>\n      <el-table-column label=\"操作\" align=\"center\">\n        <template slot-scope=\"scope\">\n          <el-button\n            type=\"danger\"\n            size=\"mini\"\n            icon=\"el-icon-delete\"\n            @click=\"del(scope.row)\"\n          >\n          </el-button>\n        </template>\n      </el-table-column>\n    </el-table>\n    <el-pagination\n      @size-change=\"handleSizeChange\"\n      @current-change=\"handleCurrentChange\"\n      :current-page=\"currentPage\"\n      :page-sizes=\"[10, 20, 30, 40]\"\n      :page-size=\"100\"\n      layout=\"total, sizes, prev, pager, next, jumper\"\n      :total=\"total\"\n    >\n    </el-pagination>\n  </div>\n</template>\n\n<script>\nimport { students, studentDelete } from \"@/api/api\";\nexport default {\n  name: \"StudentList\",\n  data() {\n    return {\n      tableData: [],\n      currentPage: 1, // 当前页数\n      pageSize: 10, //每页显示条数\n      total: 0,\n      formInline: {\n        name: \"\",\n      },\n    };\n  },\n  computed: {\n    computedData() {\n      return this.tableData.slice(\n        (this.currentPage - 1) * this.pageSize,\n        this.currentPage * this.pageSize\n      );\n    },\n  },\n  methods: {\n    find() {\n      // console.log(this.formInline);\n      this.getData(this.formInline);\n    },\n    reset() {\n      // console.log(this.formInline);\n      this.formInline = {};\n      this.getData(this.formInline);\n    },\n    del(row) {\n      console.log(row);\n      studentDelete(row.id).then((res) => {\n        if (res.data.status === 200) {\n          this.$message({ message: \"删除成功\", type: \"success\" });\n          // 刷新数据\n          this.getData();\n        }\n      });\n    },\n    handleSizeChange(val) {\n      this.pageSize = val;\n      this.currentPage = 1;\n    },\n    handleCurrentChange(val) {\n      this.currentPage = val;\n    },\n    getData(params) {\n      students(params).then((res) => {\n        //console.log(res); // 所有学生数据\n        if (res.status === 200) {\n          this.tableData = res.data.data;\n          this.total = res.data.total;\n          this.tableData.forEach((item) => {\n            // 这样做直接修改原数据了，尽量不要这么做\n            // item.sex === 1 ? (item.sex = \"男\") : (item.sex = \"女\");\n            item.sex === 1 ? (item.sex_text = \"男\") : (item.sex_text = \"女\");\n            if (item.state === \"1\") {\n              return (item.state_text = \"已入学\");\n            } else {\n              return (item.state_text = \"已毕业\");\n            }\n          });\n        }\n      });\n    },\n  },\n  created() {\n    this.getData();\n  },\n};\n</script>\n\n<style lang=\"scss\" scoped>\n.studentList {\n  .demo-form-inline,\n  .el-form-item {\n    text-align: left;\n  }\n  .el-pagination {\n    text-align: left;\n    margin-top: 20px;\n  }\n}\n</style>\n"],"mappings":"AA+DA,SAASA,QAAQ,EAAEC,aAAY,QAAS,WAAW;AACnD,eAAe;EACbC,IAAI,EAAE,aAAa;EACnBC,IAAIA,CAAA,EAAG;IACL,OAAO;MACLC,SAAS,EAAE,EAAE;MACbC,WAAW,EAAE,CAAC;MAAE;MAChBC,QAAQ,EAAE,EAAE;MAAE;MACdC,KAAK,EAAE,CAAC;MACRC,UAAU,EAAE;QACVN,IAAI,EAAE;MACR;IACF,CAAC;EACH,CAAC;EACDO,QAAQ,EAAE;IACRC,YAAYA,CAAA,EAAG;MACb,OAAO,IAAI,CAACN,SAAS,CAACO,KAAK,CACzB,CAAC,IAAI,CAACN,WAAU,GAAI,CAAC,IAAI,IAAI,CAACC,QAAQ,EACtC,IAAI,CAACD,WAAU,GAAI,IAAI,CAACC,QAAO,CAChC;IACH;EACF,CAAC;EACDM,OAAO,EAAE;IACPC,IAAIA,CAAA,EAAG;MACL;MACA,IAAI,CAACC,OAAO,CAAC,IAAI,CAACN,UAAU,CAAC;IAC/B,CAAC;IACDO,KAAKA,CAAA,EAAG;MACN;MACA,IAAI,CAACP,UAAS,GAAI,CAAC,CAAC;MACpB,IAAI,CAACM,OAAO,CAAC,IAAI,CAACN,UAAU,CAAC;IAC/B,CAAC;IACDQ,GAAGA,CAACC,GAAG,EAAE;MACPC,OAAO,CAACC,GAAG,CAACF,GAAG,CAAC;MAChBhB,aAAa,CAACgB,GAAG,CAACG,EAAE,CAAC,CAACC,IAAI,CAAEC,GAAG,IAAK;QAClC,IAAIA,GAAG,CAACnB,IAAI,CAACoB,MAAK,KAAM,GAAG,EAAE;UAC3B,IAAI,CAACC,QAAQ,CAAC;YAAEC,OAAO,EAAE,MAAM;YAAEC,IAAI,EAAE;UAAU,CAAC,CAAC;UACnD;UACA,IAAI,CAACZ,OAAO,EAAE;QAChB;MACF,CAAC,CAAC;IACJ,CAAC;IACDa,gBAAgBA,CAACC,GAAG,EAAE;MACpB,IAAI,CAACtB,QAAO,GAAIsB,GAAG;MACnB,IAAI,CAACvB,WAAU,GAAI,CAAC;IACtB,CAAC;IACDwB,mBAAmBA,CAACD,GAAG,EAAE;MACvB,IAAI,CAACvB,WAAU,GAAIuB,GAAG;IACxB,CAAC;IACDd,OAAOA,CAACgB,MAAM,EAAE;MACd9B,QAAQ,CAAC8B,MAAM,CAAC,CAACT,IAAI,CAAEC,GAAG,IAAK;QAC7B;QACA,IAAIA,GAAG,CAACC,MAAK,KAAM,GAAG,EAAE;UACtB,IAAI,CAACnB,SAAQ,GAAIkB,GAAG,CAACnB,IAAI,CAACA,IAAI;UAC9B,IAAI,CAACI,KAAI,GAAIe,GAAG,CAACnB,IAAI,CAACI,KAAK;UAC3B,IAAI,CAACH,SAAS,CAAC2B,OAAO,CAAEC,IAAI,IAAK;YAC/B;YACA;YACAA,IAAI,CAACC,GAAE,KAAM,IAAKD,IAAI,CAACE,QAAO,GAAI,GAAG,GAAKF,IAAI,CAACE,QAAO,GAAI,GAAI;YAC9D,IAAIF,IAAI,CAACG,KAAI,KAAM,GAAG,EAAE;cACtB,OAAQH,IAAI,CAACI,UAAS,GAAI,KAAK;YACjC,OAAO;cACL,OAAQJ,IAAI,CAACI,UAAS,GAAI,KAAK;YACjC;UACF,CAAC,CAAC;QACJ;MACF,CAAC,CAAC;IACJ;EACF,CAAC;EACDC,OAAOA,CAAA,EAAG;IACR,IAAI,CAACvB,OAAO,EAAE;EAChB;AACF,CAAC"},"metadata":{},"sourceType":"module","externalDependencies":[]}
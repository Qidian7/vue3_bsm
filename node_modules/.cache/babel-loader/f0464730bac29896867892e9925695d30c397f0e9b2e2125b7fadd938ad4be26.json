{"ast":null,"code":"import axios from \"axios\";\nimport { getToken } from \"./utils/setToken\";\nimport { ElMessage } from \"element-plus\";\nconst service = axios.create({\n  baseURL: \"/api\",\n  // baseURL会自动加在接口上\n  timeout: 6000 //指定请求的超时毫秒数，如果请求超过这个时间，那么请求就会中断\n});\n//添加拦截器\nservice.interceptors.request.use(config => {\n  //请求之前做些什么？\n  // 1.获取并设置token\n  // console.log(getToken('token'));\n  config.headers[\"token\"] = getToken(\"token\"); // 每次请求之前携带token，否则拿不到数据\n  return config;\n}, error => {\n  //请求错误做些什么\n  return Promise.reject(error);\n});\n//添加响应拦截器\nservice.interceptors.response.use(response => {\n  //对响应数据做些什么\n  let {\n    status,\n    message\n  } = response.data;\n  if (status !== 200) {\n    ElMessage({\n      message: message || \"error\",\n      type: \"warning\"\n    });\n  }\n  return response;\n}, error => {\n  return Promise.reject(error);\n});\nexport default service;","map":{"version":3,"names":["axios","getToken","ElMessage","service","create","baseURL","timeout","interceptors","request","use","config","headers","error","Promise","reject","response","status","message","data","type"],"sources":["/Users/mac/Desktop/vue_bsm/vue3_bsm/src/service.js"],"sourcesContent":["import axios from \"axios\";\nimport { getToken } from \"./utils/setToken\";\nimport { ElMessage } from \"element-plus\";\n\nconst service = axios.create({\n  baseURL: \"/api\", // baseURL会自动加在接口上\n  timeout: 6000, //指定请求的超时毫秒数，如果请求超过这个时间，那么请求就会中断\n});\n//添加拦截器\nservice.interceptors.request.use(\n  (config) => {\n    //请求之前做些什么？\n    // 1.获取并设置token\n    // console.log(getToken('token'));\n    config.headers[\"token\"] = getToken(\"token\"); // 每次请求之前携带token，否则拿不到数据\n    return config;\n  },\n  (error) => {\n    //请求错误做些什么\n    return Promise.reject(error);\n  }\n);\n//添加响应拦截器\nservice.interceptors.response.use(\n  (response) => {\n    //对响应数据做些什么\n    let { status, message } = response.data;\n    if (status !== 200) {\n      ElMessage({ message: message || \"error\", type: \"warning\" });\n    }\n    return response;\n  },\n  (error) => {\n    return Promise.reject(error);\n  }\n);\nexport default service;\n"],"mappings":"AAAA,OAAOA,KAAK,MAAM,OAAO;AACzB,SAASC,QAAQ,QAAQ,kBAAkB;AAC3C,SAASC,SAAS,QAAQ,cAAc;AAExC,MAAMC,OAAO,GAAGH,KAAK,CAACI,MAAM,CAAC;EAC3BC,OAAO,EAAE,MAAM;EAAE;EACjBC,OAAO,EAAE,IAAI,CAAE;AACjB,CAAC,CAAC;AACF;AACAH,OAAO,CAACI,YAAY,CAACC,OAAO,CAACC,GAAG,CAC7BC,MAAM,IAAK;EACV;EACA;EACA;EACAA,MAAM,CAACC,OAAO,CAAC,OAAO,CAAC,GAAGV,QAAQ,CAAC,OAAO,CAAC,CAAC,CAAC;EAC7C,OAAOS,MAAM;AACf,CAAC,EACAE,KAAK,IAAK;EACT;EACA,OAAOC,OAAO,CAACC,MAAM,CAACF,KAAK,CAAC;AAC9B,CAAC,CACF;AACD;AACAT,OAAO,CAACI,YAAY,CAACQ,QAAQ,CAACN,GAAG,CAC9BM,QAAQ,IAAK;EACZ;EACA,IAAI;IAAEC,MAAM;IAAEC;EAAQ,CAAC,GAAGF,QAAQ,CAACG,IAAI;EACvC,IAAIF,MAAM,KAAK,GAAG,EAAE;IAClBd,SAAS,CAAC;MAAEe,OAAO,EAAEA,OAAO,IAAI,OAAO;MAAEE,IAAI,EAAE;IAAU,CAAC,CAAC;EAC7D;EACA,OAAOJ,QAAQ;AACjB,CAAC,EACAH,KAAK,IAAK;EACT,OAAOC,OAAO,CAACC,MAAM,CAACF,KAAK,CAAC;AAC9B,CAAC,CACF;AACD,eAAeT,OAAO"},"metadata":{},"sourceType":"module","externalDependencies":[]}
{"ast":null,"code":"var Displayable = require(\"./Displayable\");\nvar BoundingRect = require(\"../core/BoundingRect\");\nvar zrUtil = require(\"../core/util\");\nvar imageHelper = require(\"./helper/image\");\n\n/**\n * @alias zrender/graphic/Image\n * @extends module:zrender/graphic/Displayable\n * @constructor\n * @param {Object} opts\n */\nfunction ZImage(opts) {\n  Displayable.call(this, opts);\n}\nZImage.prototype = {\n  constructor: ZImage,\n  type: 'image',\n  brush: function (ctx, prevEl) {\n    var style = this.style;\n    var src = style.image; // Must bind each time\n\n    style.bind(ctx, this, prevEl);\n    var image = this._image = imageHelper.createOrUpdateImage(src, this._image, this, this.onload);\n    if (!image || !imageHelper.isImageReady(image)) {\n      return;\n    } // 图片已经加载完成\n    // if (image.nodeName.toUpperCase() == 'IMG') {\n    //     if (!image.complete) {\n    //         return;\n    //     }\n    // }\n    // Else is canvas\n\n    var x = style.x || 0;\n    var y = style.y || 0;\n    var width = style.width;\n    var height = style.height;\n    var aspect = image.width / image.height;\n    if (width == null && height != null) {\n      // Keep image/height ratio\n      width = height * aspect;\n    } else if (height == null && width != null) {\n      height = width / aspect;\n    } else if (width == null && height == null) {\n      width = image.width;\n      height = image.height;\n    } // 设置transform\n\n    this.setTransform(ctx);\n    if (style.sWidth && style.sHeight) {\n      var sx = style.sx || 0;\n      var sy = style.sy || 0;\n      ctx.drawImage(image, sx, sy, style.sWidth, style.sHeight, x, y, width, height);\n    } else if (style.sx && style.sy) {\n      var sx = style.sx;\n      var sy = style.sy;\n      var sWidth = width - sx;\n      var sHeight = height - sy;\n      ctx.drawImage(image, sx, sy, sWidth, sHeight, x, y, width, height);\n    } else {\n      ctx.drawImage(image, x, y, width, height);\n    } // Draw rect text\n\n    if (style.text != null) {\n      // Only restore transform when needs draw text.\n      this.restoreTransform(ctx);\n      this.drawRectText(ctx, this.getBoundingRect());\n    }\n  },\n  getBoundingRect: function () {\n    var style = this.style;\n    if (!this._rect) {\n      this._rect = new BoundingRect(style.x || 0, style.y || 0, style.width || 0, style.height || 0);\n    }\n    return this._rect;\n  }\n};\nzrUtil.inherits(ZImage, Displayable);\nvar _default = ZImage;\nmodule.exports = _default;","map":{"version":3,"names":["Displayable","require","BoundingRect","zrUtil","imageHelper","ZImage","opts","call","prototype","constructor","type","brush","ctx","prevEl","style","src","image","bind","_image","createOrUpdateImage","onload","isImageReady","x","y","width","height","aspect","setTransform","sWidth","sHeight","sx","sy","drawImage","text","restoreTransform","drawRectText","getBoundingRect","_rect","inherits","_default","module","exports"],"sources":["/Users/mac/Desktop/vue_bsm/vue3_bsm/node_modules/zrender/lib/graphic/Image.js"],"sourcesContent":["var Displayable = require(\"./Displayable\");\n\nvar BoundingRect = require(\"../core/BoundingRect\");\n\nvar zrUtil = require(\"../core/util\");\n\nvar imageHelper = require(\"./helper/image\");\n\n/**\n * @alias zrender/graphic/Image\n * @extends module:zrender/graphic/Displayable\n * @constructor\n * @param {Object} opts\n */\nfunction ZImage(opts) {\n  Displayable.call(this, opts);\n}\n\nZImage.prototype = {\n  constructor: ZImage,\n  type: 'image',\n  brush: function (ctx, prevEl) {\n    var style = this.style;\n    var src = style.image; // Must bind each time\n\n    style.bind(ctx, this, prevEl);\n    var image = this._image = imageHelper.createOrUpdateImage(src, this._image, this, this.onload);\n\n    if (!image || !imageHelper.isImageReady(image)) {\n      return;\n    } // 图片已经加载完成\n    // if (image.nodeName.toUpperCase() == 'IMG') {\n    //     if (!image.complete) {\n    //         return;\n    //     }\n    // }\n    // Else is canvas\n\n\n    var x = style.x || 0;\n    var y = style.y || 0;\n    var width = style.width;\n    var height = style.height;\n    var aspect = image.width / image.height;\n\n    if (width == null && height != null) {\n      // Keep image/height ratio\n      width = height * aspect;\n    } else if (height == null && width != null) {\n      height = width / aspect;\n    } else if (width == null && height == null) {\n      width = image.width;\n      height = image.height;\n    } // 设置transform\n\n\n    this.setTransform(ctx);\n\n    if (style.sWidth && style.sHeight) {\n      var sx = style.sx || 0;\n      var sy = style.sy || 0;\n      ctx.drawImage(image, sx, sy, style.sWidth, style.sHeight, x, y, width, height);\n    } else if (style.sx && style.sy) {\n      var sx = style.sx;\n      var sy = style.sy;\n      var sWidth = width - sx;\n      var sHeight = height - sy;\n      ctx.drawImage(image, sx, sy, sWidth, sHeight, x, y, width, height);\n    } else {\n      ctx.drawImage(image, x, y, width, height);\n    } // Draw rect text\n\n\n    if (style.text != null) {\n      // Only restore transform when needs draw text.\n      this.restoreTransform(ctx);\n      this.drawRectText(ctx, this.getBoundingRect());\n    }\n  },\n  getBoundingRect: function () {\n    var style = this.style;\n\n    if (!this._rect) {\n      this._rect = new BoundingRect(style.x || 0, style.y || 0, style.width || 0, style.height || 0);\n    }\n\n    return this._rect;\n  }\n};\nzrUtil.inherits(ZImage, Displayable);\nvar _default = ZImage;\nmodule.exports = _default;"],"mappings":"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"},"metadata":{},"sourceType":"script","externalDependencies":[]}